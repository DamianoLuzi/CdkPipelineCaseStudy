{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.212.0"},"children":{"PostsStack":{"id":"PostsStack","path":"PostsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.212.0"},"children":{"AnalyticsConstruct":{"id":"AnalyticsConstruct","path":"PostsStack/AnalyticsConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"AnalyticsBus":{"id":"AnalyticsBus","path":"PostsStack/AnalyticsConstruct/AnalyticsBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.212.0","metadata":[{}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"name":"AnalyticsBus"}}}}},"AnalyticsQueue":{"id":"AnalyticsQueue","path":"PostsStack/AnalyticsConstruct/AnalyticsQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.212.0","metadata":[{"retentionPeriod":"*","visibilityTimeout":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":345600,"visibilityTimeout":1800}}},"Policy":{"id":"Policy","path":"PostsStack/AnalyticsConstruct/AnalyticsQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.212.0","metadata":[{"queues":["*"]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"ArnEquals":{"aws:SourceArn":{"Fn::GetAtt":["AnalyticsConstructPostsEventRuleC00CCA8E","Arn"]}}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["AnalyticsConstructAnalyticsQueueB20AE075","Arn"]}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"ArnEquals":{"aws:SourceArn":{"Fn::GetAtt":["AnalyticsConstructChatEventRuleAB1DDC89","Arn"]}}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["AnalyticsConstructAnalyticsQueueB20AE075","Arn"]}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"ArnEquals":{"aws:SourceArn":{"Fn::GetAtt":["AnalyticsConstructChatMessageEventRule22A56BF7","Arn"]}}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["AnalyticsConstructAnalyticsQueueB20AE075","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"AnalyticsConstructAnalyticsQueueB20AE075"}]}}}}}}},"AnalyticsDLQ":{"id":"AnalyticsDLQ","path":"PostsStack/AnalyticsConstruct/AnalyticsDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.212.0","metadata":[{"retentionPeriod":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600}}}}},"AnalyticsBucket":{"id":"AnalyticsBucket","path":"PostsStack/AnalyticsConstruct/AnalyticsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.212.0","metadata":[{"removalPolicy":"destroy","autoDeleteObjects":true}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"PostsStack/AnalyticsConstruct/AnalyticsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.212.0","metadata":[{"bucket":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"AnalyticsConstructAnalyticsBucketABF80E72"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["AnalyticsConstructAnalyticsBucketABF80E72","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalyticsConstructAnalyticsBucketABF80E72","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"PostsStack/AnalyticsConstruct/AnalyticsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.212.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"PostsStack/AnalyticsConstruct/AnalyticsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}}}},"AnalyticsProcessor":{"id":"AnalyticsProcessor","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.212.0","metadata":[{"runtime":"*","handler":"*","timeout":"*","code":"*","environment":"*","deadLetterQueue":"*"},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["AnalyticsConstructAnalyticsDLQ5CCE1851","Arn"]}},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AnalyticsConstructAnalyticsQueueB20AE075","Arn"]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalyticsConstructAnalyticsBucketABF80E72","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalyticsConstructAnalyticsBucketABF80E72","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AnalyticsConstructAnalyticsProcessorServiceRoleDefaultPolicy76AC4F3A","roles":[{"Ref":"AnalyticsConstructAnalyticsProcessorServiceRole0A3D8D4F"}]}}}}}}},"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\nimport os\ndef lambda_handler(event, context):\n    print('## EVENT')\n    print(event)\n        "},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["AnalyticsConstructAnalyticsDLQ5CCE1851","Arn"]}},"environment":{"variables":{"BUCKET_NAME":{"Ref":"AnalyticsConstructAnalyticsBucketABF80E72"}}},"handler":"index.lambda_handler","role":{"Fn::GetAtt":["AnalyticsConstructAnalyticsProcessorServiceRole0A3D8D4F","Arn"]},"runtime":"python3.13","timeout":300}}},"LogGroup":{"id":"LogGroup","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.212.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"AnalyticsConstructAnalyticsProcessor1896E782"}]]},"retentionInDays":731}}}}},"SqsEventSource:PostsStackAnalyticsConstructAnalyticsQueueB316FC7C":{"id":"SqsEventSource:PostsStackAnalyticsConstructAnalyticsQueueB316FC7C","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/SqsEventSource:PostsStackAnalyticsConstructAnalyticsQueueB316FC7C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.212.0","metadata":[{"target":"*","batchSize":"*","maxBatchingWindow":"*","maxConcurrency":"*","reportBatchItemFailures":true,"enabled":"*","eventSourceArn":"*","filters":"*","filterEncryption":"*","metricsConfig":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/AnalyticsProcessor/SqsEventSource:PostsStackAnalyticsConstructAnalyticsQueueB316FC7C/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":10,"eventSourceArn":{"Fn::GetAtt":["AnalyticsConstructAnalyticsQueueB20AE075","Arn"]},"functionName":{"Ref":"AnalyticsConstructAnalyticsProcessor1896E782"},"functionResponseTypes":["ReportBatchItemFailures"],"maximumBatchingWindowInSeconds":10}}}}}}},"PostsEventRule":{"id":"PostsEventRule","path":"PostsStack/AnalyticsConstruct/PostsEventRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.212.0","metadata":[{"eventBus":"*","eventPattern":{"source":"*","detailType":"*"},"targets":"*"},{"addEventPattern":[{"source":"*","detailType":"*"}]},{"addTarget":[{}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/PostsEventRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"eventBusName":{"Ref":"AnalyticsConstructAnalyticsBus64996195"},"eventPattern":{"source":["posts.service"],"detail-type":["PostCreated"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["AnalyticsConstructAnalyticsQueueB20AE075","Arn"]}}]}}}}},"ChatEventRule":{"id":"ChatEventRule","path":"PostsStack/AnalyticsConstruct/ChatEventRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.212.0","metadata":[{"eventBus":"*","eventPattern":{"source":"*","detailType":"*"},"targets":"*"},{"addEventPattern":[{"source":"*","detailType":"*"}]},{"addTarget":[{}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/ChatEventRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"eventBusName":{"Ref":"AnalyticsConstructAnalyticsBus64996195"},"eventPattern":{"source":["chat.service"],"detail-type":["DynamoDB Stream Record"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["AnalyticsConstructAnalyticsQueueB20AE075","Arn"]}}]}}}}},"ChatMessageEventRule":{"id":"ChatMessageEventRule","path":"PostsStack/AnalyticsConstruct/ChatMessageEventRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.212.0","metadata":[{"eventBus":"*","eventPattern":{"source":"*","detailType":"*"},"targets":"*"},{"addEventPattern":[{"source":"*","detailType":"*"}]},{"addTarget":[{}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/AnalyticsConstruct/ChatMessageEventRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"eventBusName":{"Ref":"AnalyticsConstructAnalyticsBus64996195"},"eventPattern":{"source":["chat.service"],"detail-type":["MessageSent","UserConnected","UserDisconnected"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["AnalyticsConstructAnalyticsQueueB20AE075","Arn"]}}]}}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"PostsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.212.0"},"children":{"Staging":{"id":"Staging","path":"PostsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"Role":{"id":"Role","path":"PostsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}},"Handler":{"id":"Handler","path":"PostsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"PostsConstruct":{"id":"PostsConstruct","path":"PostsStack/PostsConstruct","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"PostsTable":{"id":"PostsTable","path":"PostsStack/PostsConstruct/PostsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.212.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"sortKey":{"name":"*","type":"S"},"removalPolicy":"destroy","stream":"NEW_AND_OLD_IMAGES"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"postId","attributeType":"S"},{"attributeName":"createdAt","attributeType":"S"}],"keySchema":[{"attributeName":"postId","keyType":"HASH"},{"attributeName":"createdAt","keyType":"RANGE"}],"provisionedThroughput":{"readCapacityUnits":5,"writeCapacityUnits":5},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"}}}},"ScalingRole":{"id":"ScalingRole","path":"PostsStack/PostsConstruct/PostsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":["*"]}}}},"PostsLambdaRole":{"id":"PostsLambdaRole","path":"PostsStack/PostsConstruct/PostsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportPostsLambdaRole":{"id":"ImportPostsLambdaRole","path":"PostsStack/PostsConstruct/PostsLambdaRole/ImportPostsLambdaRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsLambdaRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PostsStack/PostsConstruct/PostsLambdaRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsLambdaRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["comprehend:BatchDetectTargetedSentiment","comprehend:DetectTargetedSentiment","comprehend:DetectToxicContent"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PostsConstructPostsTable52FF7A78","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PostsConstructPostsTable52FF7A78","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"PostsConstructPostsLambdaRoleDefaultPolicy215E12B8","roles":[{"Ref":"PostsConstructPostsLambdaRole55DBA9A9"}]}}}}}}},"AnalyzePostContentFunction":{"id":"AnalyzePostContentFunction","path":"PostsStack/PostsConstruct/AnalyzePostContentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.212.0","metadata":[{"functionName":"*","runtime":"*","architecture":"*","code":"*","handler":"*","memorySize":"*","timeout":"*","role":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"Code":{"id":"Code","path":"PostsStack/PostsConstruct/AnalyzePostContentFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.212.0"},"children":{"Stage":{"id":"Stage","path":"PostsStack/PostsConstruct/AnalyzePostContentFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"AssetBucket":{"id":"AssetBucket","path":"PostsStack/PostsConstruct/AnalyzePostContentFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.212.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/AnalyzePostContentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"096c338d485ab8f2e8eb9d38faca7c677462f2a11865972f0486e9bbb6ddb9ba.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"PostsConstructPostsTable52FF7A78"},"REGION":{"Ref":"AWS::Region"}}},"functionName":"postModerationFunction","handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["PostsConstructPostsLambdaRole55DBA9A9","Arn"]},"runtime":"python3.13","timeout":3}}},"LogGroup":{"id":"LogGroup","path":"PostsStack/PostsConstruct/AnalyzePostContentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.212.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/AnalyzePostContentFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"PostsConstructAnalyzePostContentFunction3F644683"}]]},"retentionInDays":731}}}}},"InvokeFcyXBRX02EWa52GlF+ECQiCzDt0fdRUDi4mo4foC5aU=":{"id":"InvokeFcyXBRX02EWa52GlF+ECQiCzDt0fdRUDi4mo4foC5aU=","path":"PostsStack/PostsConstruct/AnalyzePostContentFunction/InvokeFcyXBRX02EWa52GlF+ECQiCzDt0fdRUDi4mo4foC5aU=","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsConstructAnalyzePostContentFunction3F644683","Arn"]},"principal":"apigateway.amazonaws.com"}}}}},"FetchPostsFunction":{"id":"FetchPostsFunction","path":"PostsStack/PostsConstruct/FetchPostsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.212.0","metadata":[{"functionName":"*","runtime":"*","architecture":"*","code":"*","handler":"*","memorySize":"*","timeout":"*","role":"*","environment":"*"},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"Code":{"id":"Code","path":"PostsStack/PostsConstruct/FetchPostsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.212.0"},"children":{"Stage":{"id":"Stage","path":"PostsStack/PostsConstruct/FetchPostsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"AssetBucket":{"id":"AssetBucket","path":"PostsStack/PostsConstruct/FetchPostsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.212.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/FetchPostsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"601f02d067cc4ea33efb8850dc25f0862019e1ee9a2063baa455e151c3516524.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"PostsConstructPostsTable52FF7A78"},"REGION":{"Ref":"AWS::Region"}}},"functionName":"postFetchFunction","handler":"handler.lambda_handler","memorySize":128,"role":{"Fn::GetAtt":["PostsConstructPostsLambdaRole55DBA9A9","Arn"]},"runtime":"python3.13","timeout":3}}},"LogGroup":{"id":"LogGroup","path":"PostsStack/PostsConstruct/FetchPostsFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.212.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/FetchPostsFunction/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"PostsConstructFetchPostsFunctionCC61B852"}]]},"retentionInDays":731}}}}},"InvokeFcyXBRX02EWa52GlF+ECQiCzDt0fdRUDi4mo4foC5aU=":{"id":"InvokeFcyXBRX02EWa52GlF+ECQiCzDt0fdRUDi4mo4foC5aU=","path":"PostsStack/PostsConstruct/FetchPostsFunction/InvokeFcyXBRX02EWa52GlF+ECQiCzDt0fdRUDi4mo4foC5aU=","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsConstructFetchPostsFunctionCC61B852","Arn"]},"principal":"apigateway.amazonaws.com"}}}}},"PostsApi":{"id":"PostsApi","path":"PostsStack/PostsConstruct/PostsApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.212.0","metadata":[{"restApiName":"*","defaultCorsPreflightOptions":{"allowOrigins":"*","allowHeaders":"*","allowMethods":"*"},"endpointConfiguration":{"types":["REGIONAL"]}}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"endpointConfiguration":{"types":["REGIONAL"]},"name":"PostsAPI"}}},"Deployment":{"id":"Deployment","path":"PostsStack/PostsConstruct/PostsApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.212.0","metadata":[{"description":"*","api":"*","retainDeployments":"*"},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"PostsConstructPostsApi7FFD3DFB"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"PostsStack/PostsConstruct/PostsApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.212.0","metadata":[{"deployment":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"PostsConstructPostsApiDeploymentE939D623fbaa0ceaf7564cb14a5f5111cb1b4572"},"restApiId":{"Ref":"PostsConstructPostsApi7FFD3DFB"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"PostsStack/PostsConstruct/PostsApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"Default":{"id":"Default","path":"PostsStack/PostsConstruct/PostsApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.212.0","metadata":["*"]},"children":{"OPTIONS":{"id":"OPTIONS","path":"PostsStack/PostsConstruct/PostsApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.212.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["PostsConstructPostsApi7FFD3DFB","RootResourceId"]},"restApiId":{"Ref":"PostsConstructPostsApi7FFD3DFB"}}}}}},"posts":{"id":"posts","path":"PostsStack/PostsConstruct/PostsApi/Default/posts","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.212.0","metadata":[{"parent":"*","pathPart":"*"}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["PostsConstructPostsApi7FFD3DFB","RootResourceId"]},"pathPart":"posts","restApiId":{"Ref":"PostsConstructPostsApi7FFD3DFB"}}}},"OPTIONS":{"id":"OPTIONS","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.212.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'POST,OPTIONS'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"PostsConstructPostsApiposts68441C99"},"restApiId":{"Ref":"PostsConstructPostsApi7FFD3DFB"}}}}}},"POST":{"id":"POST","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.212.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":"*"}]},"children":{"ApiPermission.PostsStackPostsConstructPostsApi922226A6.POST..posts":{"id":"ApiPermission.PostsStackPostsConstructPostsApi922226A6.POST..posts","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/POST/ApiPermission.PostsStackPostsConstructPostsApi922226A6.POST..posts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsConstructAnalyzePostContentFunction3F644683","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"PostsConstructPostsApi7FFD3DFB"},"/",{"Ref":"PostsConstructPostsApiDeploymentStageprod2713B945"},"/POST/posts"]]}}}},"ApiPermission.Test.PostsStackPostsConstructPostsApi922226A6.POST..posts":{"id":"ApiPermission.Test.PostsStackPostsConstructPostsApi922226A6.POST..posts","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/POST/ApiPermission.Test.PostsStackPostsConstructPostsApi922226A6.POST..posts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsConstructAnalyzePostContentFunction3F644683","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"PostsConstructPostsApi7FFD3DFB"},"/test-invoke-stage/POST/posts"]]}}}},"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PostsConstructAnalyzePostContentFunction3F644683","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"PostsConstructPostsApiposts68441C99"},"restApiId":{"Ref":"PostsConstructPostsApi7FFD3DFB"}}}}}},"GET":{"id":"GET","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.212.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":"*"}]},"children":{"ApiPermission.PostsStackPostsConstructPostsApi922226A6.GET..posts":{"id":"ApiPermission.PostsStackPostsConstructPostsApi922226A6.GET..posts","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/GET/ApiPermission.PostsStackPostsConstructPostsApi922226A6.GET..posts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsConstructFetchPostsFunctionCC61B852","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"PostsConstructPostsApi7FFD3DFB"},"/",{"Ref":"PostsConstructPostsApiDeploymentStageprod2713B945"},"/GET/posts"]]}}}},"ApiPermission.Test.PostsStackPostsConstructPostsApi922226A6.GET..posts":{"id":"ApiPermission.Test.PostsStackPostsConstructPostsApi922226A6.GET..posts","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/GET/ApiPermission.Test.PostsStackPostsConstructPostsApi922226A6.GET..posts","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PostsConstructFetchPostsFunctionCC61B852","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"PostsConstructPostsApi7FFD3DFB"},"/test-invoke-stage/GET/posts"]]}}}},"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsApi/Default/posts/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PostsConstructFetchPostsFunctionCC61B852","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"PostsConstructPostsApiposts68441C99"},"restApiId":{"Ref":"PostsConstructPostsApi7FFD3DFB"}}}}}}}}}}}},"CustomerReviewEndpoint":{"id":"CustomerReviewEndpoint","path":"PostsStack/PostsConstruct/CustomerReviewEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"PostsStreamPipeRole":{"id":"PostsStreamPipeRole","path":"PostsStack/PostsConstruct/PostsStreamPipeRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportPostsStreamPipeRole":{"id":"ImportPostsStreamPipeRole","path":"PostsStack/PostsConstruct/PostsStreamPipeRole/ImportPostsStreamPipeRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsStreamPipeRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"pipes.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PostsStack/PostsConstruct/PostsStreamPipeRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"PostsStack/PostsConstruct/PostsStreamPipeRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:DescribeStream","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:ListStreams"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PostsConstructPostsTable52FF7A78","StreamArn"]}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["AnalyticsConstructAnalyticsBus64996195","Arn"]}}],"Version":"2012-10-17"},"policyName":"PostsConstructPostsStreamPipeRoleDefaultPolicyB1B58248","roles":[{"Ref":"PostsConstructPostsStreamPipeRoleDB7FE061"}]}}}}}}},"PostsStreamPipe":{"id":"PostsStreamPipe","path":"PostsStack/PostsConstruct/PostsStreamPipe","constructInfo":{"fqn":"aws-cdk-lib.aws_pipes.CfnPipe","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Pipes::Pipe","aws:cdk:cloudformation:props":{"name":"PostsStack-posts-stream-pipe","roleArn":{"Fn::GetAtt":["PostsConstructPostsStreamPipeRoleDB7FE061","Arn"]},"source":{"Fn::GetAtt":["PostsConstructPostsTable52FF7A78","StreamArn"]},"sourceParameters":{"dynamoDbStreamParameters":{"startingPosition":"LATEST","batchSize":10,"maximumBatchingWindowInSeconds":5}},"target":{"Fn::GetAtt":["AnalyticsConstructAnalyticsBus64996195","Arn"]},"targetParameters":{"eventBridgeEventBusParameters":{"detailType":"DynamoDB Stream Record","source":"posts.service"}}}}}}},"Exports":{"id":"Exports","path":"PostsStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"PostsConstructPostsApi7FFD3DFB\"}":{"id":"Output{\"Ref\":\"PostsConstructPostsApi7FFD3DFB\"}","path":"PostsStack/Exports/Output{\"Ref\":\"PostsConstructPostsApi7FFD3DFB\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}},"Output{\"Ref\":\"PostsConstructPostsApiDeploymentStageprod2713B945\"}":{"id":"Output{\"Ref\":\"PostsConstructPostsApiDeploymentStageprod2713B945\"}","path":"PostsStack/Exports/Output{\"Ref\":\"PostsConstructPostsApiDeploymentStageprod2713B945\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.212.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PostsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.212.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PostsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.212.0"}}}},"PostsIntegTest":{"id":"PostsIntegTest","path":"PostsIntegTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"2.212.0-alpha.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"PostsIntegTest/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"2.212.0-alpha.0"},"children":{"Default":{"id":"Default","path":"PostsIntegTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"PostsIntegTest/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.212.0"},"children":{"HttpApiCallf57eb76408bbbf3f0470042c55eb2b26":{"id":"HttpApiCallf57eb76408bbbf3f0470042c55eb2b26","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallf57eb76408bbbf3f0470042c55eb2b26","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.HttpApiCall","version":"2.212.0-alpha.0"},"children":{"HttpProvider":{"id":"HttpProvider","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallf57eb76408bbbf3f0470042c55eb2b26/HttpProvider","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"2.212.0-alpha.0"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallf57eb76408bbbf3f0470042c55eb2b26/HttpProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Default":{"id":"Default","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallf57eb76408bbbf3f0470042c55eb2b26/Default","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.212.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallf57eb76408bbbf3f0470042c55eb2b26/Default/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}}}},"SingletonFunction1488541a7b23466481b69b4408076b81":{"id":"SingletonFunction1488541a7b23466481b69b4408076b81","path":"PostsIntegTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Staging":{"id":"Staging","path":"PostsIntegTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.212.0"}},"Role":{"id":"Role","path":"PostsIntegTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}},"Handler":{"id":"Handler","path":"PostsIntegTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}},"HttpApiCallde2dbd10b795a447b32c9ba7b82feea1":{"id":"HttpApiCallde2dbd10b795a447b32c9ba7b82feea1","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallde2dbd10b795a447b32c9ba7b82feea1","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.HttpApiCall","version":"2.212.0-alpha.0"},"children":{"HttpProvider":{"id":"HttpProvider","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallde2dbd10b795a447b32c9ba7b82feea1/HttpProvider","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"2.212.0-alpha.0"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallde2dbd10b795a447b32c9ba7b82feea1/HttpProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Default":{"id":"Default","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallde2dbd10b795a447b32c9ba7b82feea1/Default","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.212.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"PostsIntegTest/DefaultTest/DeployAssert/HttpApiCallde2dbd10b795a447b32c9ba7b82feea1/Default/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}}}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PostsIntegTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.212.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PostsIntegTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.212.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}